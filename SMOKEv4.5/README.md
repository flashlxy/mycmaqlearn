* Introduction*

The purpose of SMOKE is to convert the resolution of the data in an emission inventory to the resolution needed by an air quality model. Emission inventories typically have an annual-total emissions value for each emissions source, or perhaps an average-day emissions value. The AQMs, however, typically require emissions data on an hourly basis, for each model grid cell(and perhaps model layer), and for each model species. Consequently, to achieve the input requirements of the AQM, emissions processing must(at a minimum) transform inventory data by temporal allocation, chemical speciation, spatial allocation, and perhaps layer assignment.

In addition to changing the resolution of the data, SMOKE must also provide the AQM input files in the correct file format. SMOKE can create the Input/Output Applications Programming Interface(I/O API) Network Common Data Form(NetCDF) output format needed by the CMAQ and MAQSIP models. It can also create the Fortran binary format for the 2-D emissions needed by REMSAD, UAM, and CAMx, and the ASCII elevated-point-source format used by the Ptsrce preprocessor to these models. File format is also important for the input files used by SMOKE, most of which are ASCII files, but some of which are I/O API NetCDF or CF-compliant NetCDF format files.

In this chapter, we introduce you to various concepts that are critical to understanding the technical decription of emissions processing, as well as provide more detail about the processing capabilities of SMOKE. This chapter provides the context and framework for the rest of the user's manual. To assist you in reading and using this chapter, we provide Appendix A. Glossary for definitions of emissions inventory and emissions modeling terminology.

## Assigns file and environment variables

The Assigns file is a script used to set up the parameters of a SMOKE run. The file configures the UNIX environment so that all of the correct input, intermediate, and output directories and files can be identified and used by the SMOKE programs. It also sets things like the name of the grid and the time period that you will run SMOKE for a given case. It does this by setting many UNIX environent variables, explained that SMOKE can be compiled on operating system other than the ones provided with the SMOKE distribution. More information on the Assigns file is provided in Section 4.2.2.2, "Assigns files".

Environment variables are aliases that can be set by a UNIX operating system. These variables are defined during a user's UNIX session, usually defined by an xterm or other UNIX terminal window. The environment variables that SMOKE uses store the input, intermediate, and output files and directories. For example, the environment variable for the directory that is the SMOKE root directory is SMKROOT. At the UNIX prompt, this environment variables could be defined to an actual path such as /home/mylogin/smoke. To set an environment variable, the UNIX setenv command is needed. In this example, the command to define SMKROOT as the given path is :

## setenv SMKROOT /home/mylogin/smoke 

After this command is issued, the SMKROOT environment variable stores the characters /home/mylogin/smoke as its value. To use the value of an environment variable, the dollar sign must proceed the variable name at the UNIX prompt. In the follow example, we give the UNIX command echo to print the contents of the SMKROOT environment variable at the UNIX prompt. Note the use of the dollar sign before the SMKROOT variable name.

## echo $SMKROOT

When the UNIX system executes this command, the following is displayed at the UNIX prompt:

/home/mylogin/smoke

The environment variables set by the Assigns file for directories are described in Chapter 3, SMOKE Directory Structure. The variables used by the SMOKE scripts for controlling SMOKE execution are described in Section 4.2.4. Finally, the environment variables that control program behavior are discribed in chapter 5, SMOKE Utility Tools, Chapter 6, SMOKE Core program, and Chapter 7, SMOKE Quality Assurance.

## Emission inventories

Emission inventories are the key input files to SMOKE and emissions modeling. The data types that these inventories contain are called inventories pollutants(e.g., carbon monoxide, ammmonia, mercury). By itself, SMOKE does not require specific data types in the inventory files it reads. However, the AQMs that SMOKE supports do require certain input data, called model species, which in turn requires SMOKE to use certain inventory pollutants.

In this section, we focus on the inventory files that SMOKE uses. Section 2.3.1, "Inventory data types" describes the major inventory types useable by SMOKE. In Section 2.3.2, "Inventory source categories", we describe the inventory source categories, and in Section 2.3.3, "Inventory file formats" we discuss the inventory file formats. The remaining sections decribe the various codes used in specific inventory sources: Section 2.3.4, "Country, state, and county codes", Section 2.3.5, "Source Classification Codes", Section 2.3.6, "Standard Industrial Classification codes", Section 2.3.8, "Maximum Achievable Control Technology codes", Section 2.3.9, "Source types: major and section-112 area sources" and Section 2.3.10, "Source types: nonroad and onroad mobile source".

## Inventory data types

SMOKE processes criteria, particulate, toxics, and activity data inventories. Activity data will be discussed along with on-road mobile sources in the next section. By criteria inventories, we mean inventories containing EPA's criteria pollutants: carbon monoxide (CO), nitrogen oxides (NOx), and volatile organic compounds (VOC) or total organic gases (TOG). Particulate inventories contain ammonia (NH3)
, sulfur dioxide (SO2), particulate matter (PM) of size 10 microns or less (PM10), and PM of size 2.5 microns or less (PM2.5).

Additionally, SMOKE can process inventories with pre-speciated criteria and/or particulate emissions. For example, elemental carbon of size 2.5 microns or less can be provided as input to SMOKE directly, instead of letting SMOKE's speciation step compute it from the PM2.5 total emissions. To ensure that SMOKE correctly processes the data when you are using pre-speciated emissions, other input files must be configured in specific ways, as explained in Section 4.4.10, "Use a different speciation mechanism or change speciation inputs"

The toxics inventories that SMOKE can process are data from the National Emisson Inventory (NEI) for Hazardous Air Pollutants (HAPs). This inventory contains hundreds of specific compounds representing the 188 HAPs defined by the Clear Air Act. The original list of 189 HAPs and modifications representing the current list are available from the EPA's web site [http://www.epa.gov/ttn/atw/orig189.html]. The reason the inventory contains many more pollutants than 188 is because several on the list of 188 are pollutant groubs, such as polycyclic organic matter, cyanide compounds and numerous metal compounds including chromium compounds, cadmium compounds, manganese compounds, and others. Note that because of these groups, specific compounds in the inventory in one inventory year may not exactly match the compounds in another inventory year. For example, one may have lead oxide reported one year but not in a subsequent year. However, those compounds not belonging to compound groups are likely to be in the inventory year that year, particularly the common gaseous HAPs emitted by mobile sources such as benzene, 1,3-butadiene, acrolein, formaldehyde, and acetaldehyde.

# Inventory source categories

## Overview

Emission inventories are divided into several source categories. These divisions stem from both differing methods for preparing the inventories and from different characteristics and attributes of the categories (more on these terms later). Generally, emission inventories are divided into the following source categories:

 Stationary area/Nonpoint sources: Soureces that are treated as being spread over a spatial extent (usually a county or air district) and that are not moveable (as compared to nonroad mobile and noroad mobile soureces). Because it not possible to collect the emissions at each point of emission, they are estimated over larger regions. The EPA introduced the term "nonpoint" to replace "stationary area" in order to aviod confusion with the term "area source", which is used as a regulatory term in the toxics realm. However, "nonpoint" has not gained acceptance (thus far) by the criteria inventory/modeling community. Thus, in this manual we will use the term "statinary area" to refer to these sources when they are in criteria inventories, while we use the term "nonpoint" to refer to these sources when they are in toxics inventories. Examples of nonpoint or stationary area sources are residential heating and architetural coatings. Numerous sources, such as dry cleaning facilities, may be treated either as stationary area/nonpoint sources or as point sources; in particular, the toxics inventory contains numerous small sources (based on emissions) that are not inventoried as nonpoint sources becasue their locations are known and are provided.
 
 Nonroad mobile sources: Vehicular and otherwise movable sources that do not include vehicles that travel on roadways. These sources are also computed as being spread over a spatial extent (again, a county or air district). Examples of nonroad mobile sources include locomotives, lawn and garden equipment, construction vehicles, and boating emissions. These sources are included in both criteria and toxics inventories.
 
 On-road mobile sources: Vehicular sources that travel on roadways. These sources can be computed either as being spread over a spatial extent or as being assigned to a line location (called a link). Data in on-road inventories can be either emissions or activity data. Activity data consists of vehicle miles traveled (VMT) and, optionally, vehicle speed. Activity data are used when SMOKE will be computing emission factors via another model such as MOVES. Examples of no-road mobile sources include light-duty gasoline vehicles and heavy-duty diesel vehicles. On-road mobile sources are included in both criteria and toxics inventories.
 
 Points sources: These are sources that are indentified by point locations, typically because they are regulated and their locations are available in regulatory reports. Point sources are often further subdivided into electric generating utilities (EGUs) and non-EGU sources, particularly in criteria inventories in which EGUs are a primary source of NOx and SO2. Examples of non-EGU point sources include chemical manufacturers (化工生产) and furniture refinishers (家具修理工). Point sources are included in both the criteria and toxics inventories.
 
 Wildfire sources: Traditionally, wildfire emissions have been treated as stationary area sources. More recently, data have also been developed for point locations, with day-specific emissions and hour specific plume rise (vertical distribution of emissions). In this case, the wildfire emissions are processed by SMOKE as point sources.
 
 Biogenic land use data: Biogenic land use data characterize the type of vegetation that exists in either county total or grid cell values. The biogenic land use data in North American is available using two different sets of land use categories: the Biogenic Emissions Landover Database (BELD) version 2 (BELD2), and the BELD version 3 (BELD3).
 
 Emission processing in SMOKE is divided into four processing categories: area, biogenic, mobile, and point. The definitions of these categories that SMOKE users are different than those used for defining emission inventories. Table 2.1, "Inventory source categories and SMOKE processing capabilities and categories" lists the inventory source categories, the types of inventories (activity data, criteria, particulates, and toxics) that SMOKE can process, the temporal resolution that is acceptable to SMOKE, and the SMOKE processing category that should be used for processing the inventory.
